const cacheName="ahj-workers",files=["./","./bundle.js","./main.css"];async function putFilesToCache(e){const a=await caches.open(cacheName);await a.addAll(e)}async function removeOldCache(e){const a=await caches.keys();return Promise.all(a.filter((a=>!e.includes(a))).map((e=>caches.delete(e))))}self.addEventListener("install",(e=>{console.log("Servise worker Установлен"),e.waitUntil((async()=>{await putFilesToCache(files),await self.skipWaiting()})())})),self.addEventListener("activate",(e=>{console.log("Service worker Активирован"),e.waitUntil((async()=>{await removeOldCache([cacheName]),await self.clients.claim()})())})),self.addEventListener("fetch",(e=>{console.log("Происходит запрос на сервер",e),e.respondWith((async()=>{const a=await caches.open(cacheName);return await a.match(e.request)||fetch(e.request)})())})),self.addEventListener("error",(e=>{console.log("Ошибка",e)}));